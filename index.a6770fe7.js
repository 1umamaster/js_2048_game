!function(){var t=new(function(){var t;function e(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.board=t||[,,,,].fill().map(function(){return[,,,,].fill(0)}),this.score=0,this.status="idle"}return t=[{key:"getState",value:function(){return this.board}},{key:"getScore",value:function(){return this.score}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){this.board=[,,,,].fill().map(function(){return[,,,,].fill(0)}),this.score=0,this.status="playing",this.addRandomTile(),this.addRandomTile()}},{key:"restart",value:function(){this.start()}},{key:"moveLeft",value:function(){var t=this,e=!1;this.board=this.board.map(function(n){for(var r=n.filter(function(t){return 0!==t}),a=0;a<r.length-1;a++)r[a]===r[a+1]&&(r[a]*=2,t.score+=r[a],r[a+1]=0,e=!0);for(var o=r.filter(function(t){return 0!==t});o.length<4;)o.push(0);return e||n.toString()===o.toString()||(e=!0),o}),e&&this.addRandomTile(),this.checkGameState()}},{key:"moveRight",value:function(){this.board=this.board.map(function(t){return t.reverse()}),this.moveLeft(),this.board=this.board.map(function(t){return t.reverse()})}},{key:"moveUp",value:function(){this.transpose(),this.moveLeft(),this.transpose()}},{key:"moveDown",value:function(){this.transpose(),this.moveRight(),this.transpose()}},{key:"addRandomTile",value:function(){var t=[];if(this.board.forEach(function(e,n){e.forEach(function(e,r){0===e&&t.push({i:n,j:r})})}),t.length>0){var e=t[Math.floor(Math.random()*t.length)],n=e.i,r=e.j;this.board[n][r]=.9>Math.random()?2:4}}},{key:"checkGameState",value:function(){var t=this;if(this.board.flat().includes(2048)){this.status="win";return}this.board.some(function(e,n){return e.some(function(e,r){return 0===e||r<3&&e===t.board[n][r+1]||n<3&&e===t.board[n+1][r]})})||(this.status="lose")}},{key:"transpose",value:function(){var t=this;this.board=this.board[0].map(function(e,n){return t.board.map(function(t){return t[n]})})}}],function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(e.prototype,t),e}()),e=document.querySelectorAll(".field-cell"),n=document.querySelector(".game-score"),r=document.querySelector(".button.start"),a={start:document.querySelector(".message-start"),win:document.querySelector(".message-win"),lose:document.querySelector(".message-lose")};function o(){var o=t.getState();e.forEach(function(t,e){var n=o[Math.floor(e/4)][e%4];t.className="field-cell",n>0&&t.classList.add("field-cell--".concat(n)),t.textContent=n||""}),n.textContent=t.getScore(),Object.keys(a).forEach(function(t){a[t].classList.add("hidden")}),"idle"===t.getStatus()?a.start.classList.remove("hidden"):"win"===t.getStatus()?a.win.classList.remove("hidden"):"lose"===t.getStatus()&&a.lose.classList.remove("hidden"),"playing"===t.getStatus()||"lose"===t.getStatus()?r.textContent="Restart":r.textContent="Start",r.classList.add("restart")}r.addEventListener("click",function(){t.restart(),o()}),document.addEventListener("keydown",function(e){if("playing"===t.getStatus()){switch(e.key){case"ArrowLeft":t.moveLeft();break;case"ArrowRight":t.moveRight();break;case"ArrowUp":t.moveUp();break;case"ArrowDown":t.moveDown();break;default:return}o()}})}();
//# sourceMappingURL=index.a6770fe7.js.map
